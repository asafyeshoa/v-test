import { mount } from "@vue/test-utils";
import Login from "./Login.vue";

describe("Login", () => {
    let wrapper;

    beforeEach(() => {
        wrapper = mount(Login);
    });

    it("renders login form", () => {
        expect(wrapper.find(".login-container").exists()).toBe(true);
        expect(wrapper.find(".login-form").exists()).toBe(true);
    });

    it("updates username and password on input", async () => {
        const usernameInput = wrapper.find("#username");
        await usernameInput.setValue("testuser");
        expect(wrapper.vm.username).toBe("testuser");

        const passwordInput = wrapper.find("#password");
        await passwordInput.setValue("password");
        expect(wrapper.vm.password).toBe("password");
    });

    it("triggers onLogin method when form is submitted", () => {
        const loginMethodSpy = jest.spyOn(wrapper.vm, "onLogin");
        wrapper.find(".login-form").trigger("submit.prevent");
        expect(loginMethodSpy).toHaveBeenCalled();
    });
});
